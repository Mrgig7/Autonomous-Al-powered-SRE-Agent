# Environment Configuration
# Copy this file to .env and fill in your values

# GitHub Webhook
GITHUB_WEBHOOK_SECRET=your-webhook-secret-here

# GitHub API (for log fetching)
GITHUB_TOKEN=ghp_your_personal_access_token
GITHUB_API_BASE_URL=https://api.github.com

# Database
DATABASE_URL=postgresql+asyncpg://sre_agent:sre_agent_password@localhost:5432/sre_agent

# Redis (Celery broker)
REDIS_URL=redis://localhost:6379/0

# Logging
LOG_LEVEL=INFO

# Environment (dev/staging/prod)
ENVIRONMENT=dev

# API Configuration
API_HOST=0.0.0.0
API_PORT=8000

# Rate Limiting
RATE_LIMIT_REQUESTS_PER_MINUTE=100

# LLM Configuration (AI Fix Generation)
LLM_PROVIDER=ollama
OLLAMA_BASE_URL=http://localhost:11434
OLLAMA_MODEL=deepseek-coder:6.7b
FIX_MAX_TOKENS=2000
FIX_MAX_FILES=3
FIX_MAX_LINES=50

# ============================================
# NOTIFICATION CONFIGURATION
# ============================================

# Slack Integration
SLACK_ENABLED=false
SLACK_WEBHOOK_URL=your-slack-webhook-url-here
SLACK_BOT_TOKEN=xoxb-your-bot-token-here
SLACK_SIGNING_SECRET=your-signing-secret
SLACK_DEFAULT_CHANNEL=#sre-alerts
SLACK_CRITICAL_CHANNEL=#sre-critical
SLACK_APPROVAL_CHANNEL=#sre-approvals

# Microsoft Teams Integration
TEAMS_ENABLED=false
TEAMS_WEBHOOK_URL=https://outlook.office.com/webhook/your-webhook-url

# Email Integration (SMTP or SendGrid)
EMAIL_ENABLED=false
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@company.com
SMTP_PASSWORD=your-app-password
SMTP_USE_TLS=true
SMTP_FROM_ADDRESS=sre-agent@company.com
SMTP_FROM_NAME=SRE Agent
EMAIL_DEFAULT_RECIPIENTS=devops@company.com,sre@company.com
EMAIL_CRITICAL_RECIPIENTS=oncall@company.com,engineering-leads@company.com
SENDGRID_API_KEY=SG.your-sendgrid-api-key

# PagerDuty Integration
PAGERDUTY_ENABLED=false
PAGERDUTY_ROUTING_KEY=your-32-character-routing-key
PAGERDUTY_API_KEY=your-pagerduty-api-key
PAGERDUTY_AUTO_RESOLVE=true

# Generic Webhook (for custom integrations)
WEBHOOK_ENABLED=false
WEBHOOK_URL=https://your-internal-service.com/webhook
WEBHOOK_AUTH_TYPE=bearer
WEBHOOK_AUTH_TOKEN=your-auth-token
WEBHOOK_HMAC_SECRET=your-hmac-secret

# Notification Manager Settings
NOTIFICATION_PARALLEL_DISPATCH=true
NOTIFICATION_RATE_LIMIT_ENABLED=true
NOTIFICATION_RATE_LIMIT_PER_MINUTE=30
NOTIFICATION_MIN_LEVEL=info

# ============================================
# AUTHENTICATION CONFIGURATION
# ============================================

# JWT Settings (IMPORTANT: Change secret key in production!)
JWT_SECRET_KEY=your-super-secure-secret-key-minimum-32-characters
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7
JWT_ACCESS_COOKIE_NAME=sre_access_token
JWT_REFRESH_COOKIE_NAME=sre_refresh_token
AUTH_COOKIE_SAMESITE=lax
AUTH_COOKIE_SECURE=false

# GitHub OAuth (Optional - for GitHub login)
GITHUB_OAUTH_CLIENT_ID=your-github-oauth-client-id
GITHUB_OAUTH_CLIENT_SECRET=your-github-oauth-client-secret
GITHUB_OAUTH_REDIRECT_URI=http://localhost:3000/oauth/github/callback
GITHUB_OAUTH_TOKEN_TTL_SECONDS=3600
GITHUB_OAUTH_STATE_TTL_SECONDS=600
GITHUB_OAUTH_REQUIRED_SCOPES=repo,read:user,workflow

# GitHub App install URL (Phase 1 onboarding)
GITHUB_APP_INSTALL_URL=https://github.com/apps/your-app-name/installations/new
PHASE1_INSTALL_STATE_TTL_SECONDS=1800
PHASE1_ONBOARDING_STATE_TTL_SECONDS=86400
PHASE1_ONBOARDING_RATE_LIMIT_PER_MINUTE=10
PHASE1_ENABLE_DASHBOARD=true
PHASE1_ENABLE_INSTALL_FLOW=true

# Google OAuth (Optional - for Google login)
GOOGLE_OAUTH_CLIENT_ID=your-google-oauth-client-id
GOOGLE_OAUTH_CLIENT_SECRET=your-google-oauth-client-secret
GOOGLE_OAUTH_REDIRECT_URI=http://localhost:8000/api/v1/auth/oauth/google/callback

# Session Settings
SESSION_MAX_AGE_HOURS=24
REQUIRE_EMAIL_VERIFICATION=false

# ============================================
# CI/CD PROVIDER CONFIGURATION (Phase 2)
# ============================================

# GitLab Integration
GITLAB_ENABLED=false
GITLAB_URL=https://gitlab.com
GITLAB_TOKEN=your-gitlab-personal-access-token
GITLAB_WEBHOOK_TOKEN=your-gitlab-webhook-secret-token

# CircleCI Integration
CIRCLECI_ENABLED=false
CIRCLECI_TOKEN=your-circleci-api-token
CIRCLECI_WEBHOOK_SECRET=your-circleci-webhook-signing-secret

# Jenkins Integration
JENKINS_ENABLED=false
JENKINS_URL=https://your-jenkins-instance.com
JENKINS_USER=admin
JENKINS_TOKEN=your-jenkins-api-token
JENKINS_WEBHOOK_TOKEN=your-jenkins-webhook-token

# Azure DevOps Integration
AZURE_DEVOPS_ENABLED=false
AZURE_DEVOPS_ORG=your-organization-name
AZURE_DEVOPS_PAT=your-azure-devops-personal-access-token
AZURE_DEVOPS_WEBHOOK_SECRET=your-webhook-basic-auth-password

# Enabled CI Providers (comma-separated: github,gitlab,circleci,jenkins,azure_devops)
ENABLED_CI_PROVIDERS=github
